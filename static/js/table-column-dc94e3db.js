var a=Object.defineProperty,t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(t,e,l)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,o=(a,o)=>{for(var i in o||(o={}))e.call(o,i)&&n(a,i,o[i]);if(t)for(var i of t(o))l.call(o,i)&&n(a,i,o[i]);return a};import{U as i,R as r,X as s,r as p,ah as c,ai as g,o as d,h as f,c as u,w as b,T as y,f as m,aj as D,g as _,j as h,e as j,ak as v,Y as w,al as x,I as C,ab as O,aa as k,ac as z,am as P}from"./vendor-c16584f8.js";/* empty css                  */import{i as $}from"./index-9589d783.js";const S={class:"c-table"},E={key:0,class:"c-table__fifter card"},F=C("查询"),I={class:"c-table__content card"},B={key:0,class:"c-table__button",flex:"align:center justify:end",ref:"tableBtn"},T=C("导出"),q=h("div",{flex:"dir:column align:center justify:center"},[h("p",null,"暂无数据")],-1),R={props:{api:{required:!0,type:Function},listPath:{type:String,default:"data.result"},totalPath:{type:String,default:"data.total"},exportConfig:{type:Object,default:function(){return{api:null,noPage:!1}}},pageData:{type:Object,default:function(){return{limit:10,page:1}}},filterData:{type:Object,default:function(){return{}}},size:{type:String,default:"small"},paging:{type:Boolean,default:!0}},emits:["load-finish"],setup(a,{expose:t,emit:e}){const l=a;let n=i({tableCount:0,tableData:[],loading:!1,loadingDown:!1});r((()=>{C()}));const C=()=>{n.tableData=[];const a=U(l.paging);n.loading=!0,l.api(a).then((a=>{n.loading=!1,n.tableData=R(a,l.listPath),l.paging&&(n.tableCount=R(a,l.totalPath)),e("load-finish",a)})).catch((a=>{console.error(a),n.loading=!1}))},R=(a,t)=>{let e=o({},a);return t.split(".").forEach((a=>{if(!$(e)||void 0===e[a])throw new Error(`在数据路径${t}中，${a}不存在`);e=e[a]})),e},U=a=>{let t=o({},l.filterData);return a&&Object.assign(t,l.pageData),t},X=a=>{a&&!/(^[1-9]\d*$)/.test(a)&&(a=1),a&&(l.pageData.page=a),C()},Y=()=>{const a=U(!l.exportConfig.noPage);n.loadingDown=!0,l.exportConfig.api(a).then((()=>{n.loadingDown=!1})).catch((()=>{n.loadingDown=!1}))},A=a=>{l.pageData.page=a,C()};let{tableCount:G,tableData:H,loading:J,loadingDown:K}=s(n),L=p(null);return t({tableData:H,elTable:L,reload:X}),(t,e)=>{const l=O,n=k,o=z,i=P,r=c,s=g("load");return d(),f("div",S,[t.$slots.filter?(d(),f("div",E,[u(o,{ref:"classFilterForm",model:a.filterData,inline:!0,class:"c-table__form",size:a.size},{default:b((()=>[y(t.$slots,"filter"),u(n,null,{default:b((()=>[u(l,{icon:m(D),type:"primary",loading:m(J),onClick:e[0]||(e[0]=a=>X(1))},{default:b((()=>[F])),_:1},8,["icon","loading"])])),_:1})])),_:3},8,["model","size"])])):_("",!0),h("div",I,[t.$slots.btn||a.exportConfig.api?(d(),f("div",B,[y(t.$slots,"btn"),a.exportConfig.api?(d(),j(l,{key:0,type:"primary",icon:m(v),loading:m(K),onClick:Y},{default:b((()=>[T])),_:1},8,["icon","loading"])):_("",!0)],512)):_("",!0),w((d(),j(i,x({ref_key:"tableInstance",ref:L,class:"c-table__table",data:m(H),size:a.size,style:{width:"100%"}},t.$attrs),{empty:b((()=>[q])),default:b((()=>[y(t.$slots,"default")])),_:3},16,["data","size"])),[[s,m(J)]]),a.paging?(d(),j(r,{key:1,class:"c-table__pagination",background:"",flex:"justify:center",small:"","hide-on-single-page":"","current-page":a.pageData.page,"page-size":a.pageData.limit,layout:"total, prev, pager, next, jumper",total:m(G),onCurrentChange:A},null,8,["current-page","page-size","total"])):_("",!0)])])}}};export{R as _};
