var a=Object.defineProperty,t=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(t,e,l)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,o=(a,o)=>{for(var i in o||(o={}))e.call(o,i)&&n(a,i,o[i]);if(t)for(var i of t(o))l.call(o,i)&&n(a,i,o[i]);return a};import{U as i,R as r,X as s,r as p,af as c,ag as g,o as d,h as f,c as u,w as b,T as y,f as m,ah as D,g as h,j as _,e as j,ai as v,Y as w,aj as x,J as C,ab as O,aa as P,ac as k,ak as z}from"./vendor-6ec9e59d.js";/* empty css                  */import{i as $}from"./index-f94535dc.js";const S={class:"c-table"},E={key:0,class:"c-table__fifter card"},F=C("查询"),B={class:"c-table__content card"},I={key:0,class:"c-table__button",flex:"align:center justify:end",ref:"tableBtn"},T=C("导出"),q=_("div",{flex:"dir:column align:center justify:center"},[_("p",null,"暂无数据")],-1),J={props:{api:{required:!0,type:Function},listPath:{type:String,default:"data.result"},totalPath:{type:String,default:"data.total"},exportConfig:{type:Object,default:function(){return{api:null,noPage:!1}}},pageData:{type:Object,default:function(){return{limit:10,page:1}}},filterData:{type:Object,default:function(){return{}}},size:{type:String,default:"small"},paging:{type:Boolean,default:!0}},emits:["load-finish"],setup(a,{expose:t,emit:e}){const l=a;let n=i({tableCount:0,tableData:[],loading:!1,loadingDown:!1});r((()=>{C()}));const C=()=>{n.tableData=[];const a=R(l.paging);n.loading=!0,l.api(a).then((a=>{n.loading=!1,l.paging?(n.tableData=J(a,l.listPath),n.tableCount=J(a,l.totalPath)):n.tableData=J(a,l.listPath),e("load-finish",a)})).catch((a=>{console.error(a),n.loading=!1}))},J=(a,t)=>{let e=o({},a);return t.split(".").forEach((a=>{if(!$(e)||void 0===e[a])throw new Error(`在数据路径${t}中，${a}不存在`);e=e[a]})),e},R=a=>{let t=o({},l.filterData);return a&&Object.assign(t,l.pageData),t},U=a=>{a&&!/(^[1-9]\d*$)/.test(a)&&(a=1),a&&(l.pageData.page=a),C()},X=()=>{const a=R(!l.exportConfig.noPage);n.loadingDown=!0,l.exportConfig.api(a).then((()=>{n.loadingDown=!1})).catch((()=>{n.loadingDown=!1}))},Y=a=>{l.pageData.page=a,C()};let{tableCount:A,tableData:G,loading:H,loadingDown:K}=s(n),L=p(null);return t({tableData:G,elTable:L,reload:U}),(t,e)=>{const l=O,n=P,o=k,i=z,r=c,s=g("load");return d(),f("div",S,[t.$slots.filter?(d(),f("div",E,[u(o,{ref:"classFilterForm",model:a.filterData,inline:!0,class:"c-table__form",size:a.size},{default:b((()=>[y(t.$slots,"filter"),u(n,null,{default:b((()=>[u(l,{icon:m(D),type:"primary",loading:m(H),onClick:e[0]||(e[0]=a=>U(1))},{default:b((()=>[F])),_:1},8,["icon","loading"])])),_:1})])),_:3},8,["model","size"])])):h("",!0),_("div",B,[t.$slots.btn||a.exportConfig.api?(d(),f("div",I,[y(t.$slots,"btn"),a.exportConfig.api?(d(),j(l,{key:0,type:"primary",icon:m(v),loading:m(K),onClick:X},{default:b((()=>[T])),_:1},8,["icon","loading"])):h("",!0)],512)):h("",!0),w((d(),j(i,x({ref_key:"tableInstance",ref:L,class:"c-table__table",data:m(G),size:a.size,style:{width:"100%"}},t.$attrs),{empty:b((()=>[q])),default:b((()=>[y(t.$slots,"default")])),_:3},16,["data","size"])),[[s,m(H)]]),a.paging?(d(),j(r,{key:1,class:"c-table__pagination",background:"",flex:"justify:center",small:"","hide-on-single-page":"","current-page":a.pageData.page,"page-size":a.pageData.limit,layout:"total, prev, pager, next, jumper",total:m(A),onCurrentChange:Y},null,8,["current-page","page-size","total"])):h("",!0)])])}}};export{J as _};
